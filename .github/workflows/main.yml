name: WordPress Cron Runner
on:
  schedule:
    - cron: '*/5 * * * *'
  workflow_dispatch:

jobs:
  run-cron:
    runs-on: ubuntu-latest
    steps:
      - name: Execute WordPress Cron Jobs
        run: |
          echo "üöÄ Starting WordPress cron execution - $(date)"
          echo "=============================================="
          
          # First URL with SSL bypass and better error handling
          echo "üîó Calling: https://tst1.xo.je/?wp_automatic=cron"
          response1=$(curl -s -k -L -w "%{http_code}" -o /tmp/response1.txt "https://tst1.xo.je/?wp_automatic=cron" || echo "curl_failed")
          echo "Response code: $response1"
          
          # Debug info for first call
          if [ "$response1" = "curl_failed" ]; then
            echo "‚ùå First URL failed completely"
          else
            echo "‚úÖ First URL HTTP Status: $response1"
          fi
          
          # Wait 5 seconds
          echo "‚è≥ Waiting 5 seconds..."
          sleep 5
          echo "----------------------------------------------"
          
          # Second URL with SSL bypass and better error handling
          echo "üîó Calling: https://tst1.xo.je/wp-cron.php?doing_wp_cron%20%3E%20/dev/null%202%3E&1"
          response2=$(curl -s -k -L -w "%{http_code}" -o /tmp/response2.txt "https://tst1.xo.je/wp-cron.php?doing_wp_cron%20%3E%20/dev/null%202%3E&1" || echo "curl_failed")
          echo "Response code: $response2"
        
          
          # Debug info for second call
          if [ "$response2" = "curl_failed" ]; then
            echo "‚ùå Second URL failed completely"
          else
            echo "‚úÖ Second URL HTTP Status: $response2"
          fi
          
          echo "=============================================="
          echo "üéâ Cron execution completed at: $(date)"
          echo "üìä Final Summary:"
          echo "   First URL: $response1"
          echo "   Second URL: $response2"
